function RangeSlider_(a){var b=this;b.rangeslider=new RangeSlider(b,a);b.rangeslider.rstb.init_();b.rangeslider.box.init_();b.rangeslider.bar.init_();b.rangeslider.left.init_();b.rangeslider.right.init_();console.log("Loaded Plugin RangeSlider")}videojs.plugin("rangeslider",RangeSlider_);function RangeSlider(b,a){var b=b||this;this.player=b;this.components={};a=a||{};if(!a.hasOwnProperty("locked")){a.locked=false}this.options=a;this.init()}RangeSlider.prototype={init:function(){var a=this.player||{};this.updatePrecision=3;var b=a.controlBar.progressControl.seekBar;this.components.RSTimeBar=b.RSTimeBar;this.hide();if(this.options.locked){this.lock()}this.rstb=this.components.RSTimeBar;this.box=this.rstb.SeekRSBar;this.bar=this.box.SelectionBar;this.left=this.box.SelectionBarLeft;this.right=this.box.SelectionBarRight},lock:function(){this.options.locked=true;vjs.addClass(this.box.el_,"locked")},unlock:function(){this.options.locked=false;vjs.removeClass(this.box.el_,"locked")},show:function(){this.components.RSTimeBar.show()},hide:function(){this.components.RSTimeBar.hide()},setValue:function(a,c){var e=this._percent(c);var b=(a===0||a===1);var d=!this.locked;if(d&&b){this.box.setPosition(a,e)}},getValues:function(){var b={},c,a;c=this._getArrowValue(0);a=this._getArrowValue(1);return{start:c,end:a}},playBetween:function(b,a){this.player.currentTime(b);this.player.play();this.show();if(this.options.locked){this.unlock();this.setValue(0,b);this.setValue(1,a);this.lock()}else{this.setValue(0,b);this.setValue(1,a)}this.bar.activatePlay(b,a)},_getArrowValue:function(a){var a=a||0;var c=this.player.duration();c=typeof c=="undefined"?0:c;var b=this[a===0?"left":"right"].el_.style.left.replace("%","");if(b==""){b=a===0?0:100}return vjs.round(Math.min(c,Math.max(0,c*b/100)),this.updatePrecision-1)},_percent:function(a){var b=this.player.duration();if(isNaN(b)){return 0}return Math.min(1,Math.max(0,a/b))},};videojs.Player.prototype.lockSlider=function(){return this.rangeslider.lock()};videojs.Player.prototype.unlockSlider=function(){return this.rangeslider.unlock()};videojs.Player.prototype.showSlider=function(){return this.rangeslider.show()};videojs.Player.prototype.hideSlider=function(){return this.rangeslider.hide()};videojs.Player.prototype.setValue=function(a,b){return this.rangeslider.setValue(options)};videojs.Player.prototype.playBetween=function(b,a){return this.rangeslider.playBetween(b,a)};videojs.Player.prototype.getValues=function(){return this.rangeslider.getValues()};vjs.SeekBar.prototype.options_.children.RSTimeBar={};vjs.RSTimeBar=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a)}});vjs.RSTimeBar.prototype.init_=function(){this.rs=this.player_.rangeslider};vjs.RSTimeBar.prototype.options_={children:{SeekRSBar:{}}};vjs.RSTimeBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-timebar-RS",innerHTML:""})};vjs.SeekRSBar=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);this.on("mousedown",this.onMouseDown);this.handleValue=null}});vjs.SeekRSBar.prototype.init_=function(){this.rs=this.player_.rangeslider};vjs.SeekRSBar.prototype.options_={children:{SelectionBar:{},SelectionBarLeft:{},SelectionBarRight:{}}};vjs.SeekRSBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-holder"})};vjs.SeekRSBar.prototype.onMouseDown=function(a){a.preventDefault();vjs.blockTextSelection();if(!this.rs.options.locked){vjs.on(document,"mousemove",vjs.bind(this,this.onMouseMove));vjs.on(document,"mouseup",vjs.bind(this,this.onMouseUp))}};vjs.SeekRSBar.prototype.onMouseUp=function(a){vjs.off(document,"mousemove",this.onMouseMove,false);vjs.off(document,"mouseup",this.onMouseUp,false)};vjs.SeekRSBar.prototype.onMouseMove=function(a){var b=this.calculateDistance(a);if(this.rs.left.pressed){this.setPosition(0,b)}else{if(this.rs.right.pressed){this.setPosition(1,b)}}};vjs.SeekRSBar.prototype.setPosition=function(b,f){var e=this;if(this.rs.options.locked){return false}if(isNaN(f)){return false}if(!(b===0||b===1)){return false}var g=this.rs.left.el_,a=this.rs.right.el_,c=this.rs[b===0?"left":"right"].el_,d=this.rs.bar;this.handleValue=f;if((b===0?d.updateLeft(f):d.updateRight(f))){c.style.left=vjs.round(this.handleValue*100,2)+"%";b===0?d.updateLeft(f):d.updateRight(f);if(b===0&&vjs.round(this.handleValue*100,2)>=90){g.style.zIndex=25}else{g.style.zIndex=10}}return true};vjs.SeekRSBar.prototype.calculateDistance=function(c){var a=this.getRSTBX();var b=this.getRSTBWidth();var d=this.getWidth();a=a+(d/2);b=b-d;return Math.max(0,Math.min(1,(c.pageX-a)/b))};vjs.SeekRSBar.prototype.getRSTBWidth=function(){return this.rs.rstb.el_.offsetWidth};vjs.SeekRSBar.prototype.getRSTBX=function(){return vjs.findPosition(this.rs.rstb.el_).left};vjs.SeekRSBar.prototype.getWidth=function(){return this.rs.left.el_.offsetWidth};vjs.SeekRSBar.prototype.getOffsetLeftPercent=function(a){return a/this.getRSTBWidth()};vjs.SeekRSBar.prototype.getRawValue=function(){return this.handleValue};vjs.SeekRSBar.prototype.getValue=function(){if(this.handleValue!==null){return vjs.round(this.handleValue*this.player.duration(),2)}return null};vjs.SeekRSBar.prototype.setRawValue=function(a){this.handleValue=a};vjs.SeekRSBar.prototype.setBarUpdateHandler=function(a){this.updateBar=a};vjs.SelectionBar=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);this.on("mouseup",this.onMouseUp);this.fired=false}});vjs.SelectionBar.prototype.init_=function(){this.rs=this.player_.rangeslider};vjs.SelectionBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-selectionbar-RS"})};vjs.SelectionBar.prototype.onMouseUp=function(){var f=this.rs.left.el_.style.left.replace("%",""),b=this.rs.right.el_.style.left.replace("%",""),e=this.player_.duration(),a=this.rs.updatePrecision,c=vjs.round(f*e/100,a),d=vjs.round(b*e/100,a);this.player_.currentTime(c);this.player_.play();this.rs.bar.activatePlay(c,d)};vjs.SelectionBar.prototype.updateLeft=function(d){var e=this.rs.right.el_.offsetLeft;var a=this.rs.box.getOffsetLeftPercent(e);var c=this.rs.box.getOffsetLeftPercent(e)-d;var b=this.rs.updatePrecision;if(vjs.round(d,b)<=vjs.round(a,b)){this.rs.bar.el_.style.left=vjs.round(d*100,b)+"%";this.rs.bar.el_.style.width=vjs.round(c*100,b)+"%";return true}return false};vjs.SelectionBar.prototype.updateRight=function(e){var f=this.rs.left.el_.offsetLeft;var c=this.rs.box.getOffsetLeftPercent(f);var d=e-this.rs.box.getOffsetLeftPercent(f);var b=this.rs.updatePrecision;if(vjs.round(e,b)>=vjs.round(c,b)){var a=vjs.round(d*100,b);this.rs.bar.el_.style.width=a+"%";this.rs.bar.el_.style.left=vjs.round(e*100-a,b)+"%";return true}return false};vjs.SelectionBar.prototype.activatePlay=function(b,a){this.timeStart=b;this.timeEnd=a;this.player_.on("timeupdate",function(){this.rangeslider.bar._processPlay()})};vjs.SelectionBar.prototype.suspendPlay=function(){this.fired=false;this.player_.off("timeupdate",function(){this.rangeslider.bar._processPlay()})};vjs.SelectionBar.prototype._processPlay=function(b,a){if(this.player_.currentTime()>=this.timeStart&&(this.timeEnd<0||this.player_.currentTime()<this.timeEnd)){if(this.fired){return}this.fired=true}else{if(!this.fired){return}this.fired=false;this.player_.currentTime(this.timeEnd);this.player_.pause();this.suspendPlay()}};vjs.SelectionBarLeft=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);this.on("mousedown",this.onMouseDown);this.pressed=false}});vjs.SelectionBarLeft.prototype.init_=function(){this.rs=this.player_.rangeslider};vjs.SelectionBarLeft.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-left-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})};vjs.SelectionBarLeft.prototype.onMouseDown=function(a){a.preventDefault();vjs.blockTextSelection();if(!this.rs.options.locked){this.pressed=true;vjs.on(document,"mouseup",vjs.bind(this,this.onMouseUp));vjs.addClass(this.el_,"active")}};vjs.SelectionBarLeft.prototype.onMouseUp=function(a){vjs.off(document,"mouseup",this.onMouseUp,false);vjs.removeClass(this.el_,"active");if(!this.rs.options.locked){this.pressed=false}};vjs.SelectionBarRight=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);this.on("mousedown",this.onMouseDown);this.pressed=false}});vjs.SelectionBarRight.prototype.init_=function(){this.rs=this.player_.rangeslider};vjs.SelectionBarRight.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-rangeslider-handle vjs-selectionbar-right-RS",innerHTML:'<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>'})};vjs.SelectionBarRight.prototype.onMouseDown=function(a){a.preventDefault();vjs.blockTextSelection();if(!this.rs.options.locked){this.pressed=true;vjs.on(document,"mouseup",vjs.bind(this,this.onMouseUp));vjs.addClass(this.el_,"active")}};vjs.SelectionBarRight.prototype.onMouseUp=function(a){vjs.off(document,"mouseup",this.onMouseUp,false);vjs.removeClass(this.el_,"active");if(!this.rs.options.locked){this.pressed=false}};